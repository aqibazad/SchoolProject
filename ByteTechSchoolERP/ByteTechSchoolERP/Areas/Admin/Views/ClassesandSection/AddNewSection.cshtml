@model ByteTechSchoolERP.Models.ClassAndSection.Section

@{
    ViewData["Title"] = "Add New Section";
    var classes = ViewBag.Classes as List<ByteTechSchoolERP.Models.ClassAndSection.Class>;
}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <style>


        .style-0 {
            border-radius: 10px;
            background: #fff;
            vertical-align: middle;
            font-size: 16px;
            padding: 10px;
            flex: 0 0 100%;
            position: relative;
            width: 100%;
            min-height: 1px;
            padding-right: 5px;
            padding-left: 5px;
            box-sizing: border-box;
            margin-top: 20px;
        }





        .icon-container {
            text-align: center;
            margin: 0px 5px;
            background-color: white;
            border-radius: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-bottom: 5px;
            margin-top: 5px;
        }

            .icon-container i {
                font-size: 3em;
                color: blueviolet;
            }

            .icon-container:hover {
                transform: scale(1.1);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .icon-container a {
                color: inherit;
                text-decoration: none;
            }

        .ss {
            width: 7.333%;
        }

        .style-0 {
            background: #fff;
            box-shadow: 0px 0px 1px 0px gray;
            box-shadow: rgb(128, 128, 128) 0px 0px 1px 0px;
            -webkit-box-flex: 0;
            flex: 0 0 33.3333%;
            margin-bottom: 20px;
            padding-top: 20px;
            padding: 20px;
            border-radius: 15px;
            position: relative;
            width: 100%;
            min-height: 1px;
            padding-right: 20px;
            padding-left: 20px;
            box-sizing: border-box;
        }

        .style-1 {
            line-height: 16px;
            text-align: center;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
            font-family: Poppins, sans-serif;
            color: rgb(34, 34, 34);
            margin-top: 0px;
            box-sizing: border-box;
        }

        .style-2 {
            box-sizing: border-box;
        }

        .style-3 {
            width: 15px;
            height: 6px;
            border-radius: 10px;
            display: inline-block;
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(94, 114, 228) 0px, rgb(130, 94, 228) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            box-sizing: border-box;
        }

        .style-4 {
            display: inline-block;
            font-weight: 100;
            font-size: 10px;
            color: rgb(77, 76, 172);
            box-sizing: border-box;
        }

        .style-5 {
            width: 20px;
            height: 7px;
            border-radius: 10px;
            display: inline-block;
            margin-left: 10px;
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(136, 152, 170) 0px, rgb(136, 138, 170) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            box-sizing: border-box;
        }

        .style-6 {
            display: inline-block;
            font-weight: 100;
            font-size: 12px;
            box-sizing: border-box;
        }

        .style-7 {
            box-sizing: border-box;
        }

        .style-8 {
            border: 0.666667px solid rgb(150, 152, 214);
            border-radius: 25px;
            margin-top: 15px;
            box-sizing: border-box;
            padding: 5px;
        }

        .style-9 {
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(94, 114, 228) 0px, rgb(130, 94, 228) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            margin-top: -10px;
            position: absolute;
            margin-left: 8px;
            padding-left: 3px;
            padding-right: 3px;
            font-size: 12px;
            color: rgb(255, 255, 255);
            display: block;
            margin-bottom: 8px;
            touch-action: manipulation;
            box-sizing: border-box;
            border: 0.666667px solid rgb(153, 153, 153);
            border-radius: 12px;
        }

        .style-10 {
            width: 80px;
            height: 80px;
            height: 80px;
            margin: 10px;
            border-radius: 50%;
            vertical-align: middle;
            border-style: none;
            box-sizing: border-box;
        }

        .style-11 {
            font-size: 14px;
            border-radius: 25px;
            border: 0px none rgb(73, 80, 87);
            display: block;
            width: 100%;
            padding: 8px 12px;
            line-height: 17.5px;
            color: rgb(73, 80, 87);
            background-color: rgb(255, 255, 255);
            background-image: none;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            overflow: hidden;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }

        .style-12 {
            display: inline-block;
            border-radius: 20px;
            padding: 8px 14px;
            line-height: 16px;
            font-size: 11px;
            text-transform: capitalize;
            cursor: pointer;
            color: rgb(255, 255, 255);
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(94, 114, 228) 0px, rgb(130, 94, 228) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            user-select: none;
            border: 0.666667px solid rgba(0, 0, 0, 0);
            transition: all 0.15s ease-in-out 0s;
            box-sizing: border-box;
        }

        .style-13 {
            margin-right: 5px;
            font-family: themify;
            font-style: normal;
            font-weight: 400;
            font-variant: normal;
            text-transform: none;
            line-height: 11px;
            -webkit-font-smoothing: antialiased;
            box-sizing: border-box;
        }

        .style-14 {
            font-size: 10px;
            padding-left: 5px;
            padding-right: 5px;
            padding-right: 5px;
            background: rgba(0, 0, 0, 0) linear-gradient(45deg, rgb(255, 182, 77), rgb(255, 203, 128)) repeat scroll 0% 0% / auto padding-box border-box;
            margin-left: 10px;
            margin-top: 0px;
            border-radius: 15px;
            box-sizing: border-box;
        }

        .style-15 {
            border: 0.666667px solid rgb(150, 152, 214);
            border-radius: 25px;
            margin-top: 15px;
            box-sizing: border-box;
            padding: 5px;
        }

        .style-16 {
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(94, 114, 228) 0px, rgb(130, 94, 228) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            margin-top: -10px;
            position: absolute;
            margin-left: 8px;
            padding-left: 3px;
            padding-right: 3px;
            font-size: 12px;
            color: rgb(255, 255, 255);
            display: block;
            margin-bottom: 8px;
            touch-action: manipulation;
            box-sizing: border-box;
            border: 0.666667px solid rgb(153, 153, 153);
            border-radius: 12px;
        }

        .style-17 {
            font-size: 14px;
            border-radius: 25px;
            border: 0px none rgb(73, 80, 87);
            display: block;
            width: 100%;
            padding: 8px 12px;
            line-height: 17.5px;
            color: rgb(73, 80, 87);
            background-color: rgb(255, 255, 255);
            background-image: none;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            overflow: visible;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }

        .style-18 {
            border: 0.666667px solid rgb(150, 152, 214);
            border-radius: 25px;
            margin-top: 15px;
            box-sizing: border-box;
            padding: 5px;
        }

        .style-19 {
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(94, 114, 228) 0px, rgb(130, 94, 228) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            margin-top: -10px;
            position: absolute;
            margin-left: 8px;
            padding-left: 3px;
            padding-right: 3px;
            font-size: 12px;
            color: rgb(255, 255, 255);
            display: block;
            margin-bottom: 8px;
            touch-action: manipulation;
            box-sizing: border-box;
            border: 0.666667px solid rgb(153, 153, 153);
            border-radius: 12px;
        }

        .style-20 {
            font-size: 14px;
            border-radius: 25px;
            border: 0px none rgb(73, 80, 87);
            display: block;
            width: 100%;
            padding: 8px 12px;
            line-height: 17.5px;
            color: rgb(73, 80, 87);
            background-color: rgb(255, 255, 255);
            background-image: none;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            overflow: visible;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }

        .style-21 {
            border: 0.666667px solid rgb(150, 152, 214);
            border-radius: 25px;
            margin-top: 15px;
            box-sizing: border-box;
            padding: 5px;
        }

        .style-22 {
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(94, 114, 228) 0px, rgb(130, 94, 228) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            margin-top: -10px;
            position: absolute;
            margin-left: 8px;
            padding-left: 3px;
            padding-right: 3px;
            font-size: 12px;
            color: rgb(255, 255, 255);
            display: block;
            margin-bottom: 8px;
            touch-action: manipulation;
            box-sizing: border-box;
            border: 0.666667px solid rgb(153, 153, 153);
            border-radius: 12px;
        }

        .style-23 {
            font-size: 14px;
            border-radius: 25px;
            border: 0px none rgb(73, 80, 87);
            display: block;
            width: 100%;
            padding: 8px 12px;
            line-height: 17.5px;
            color: rgb(73, 80, 87);
            background-color: rgb(255, 255, 255);
            background-image: none;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            overflow: visible;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }

        .style-24 {
            border: 0.666667px solid rgb(150, 152, 214);
            border-radius: 25px;
            margin-top: 15px;
            box-sizing: border-box;
            padding: 5px;
        }

        .style-25 {
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(136, 152, 170) 0px, rgb(136, 138, 170) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            margin-top: -10px;
            position: absolute;
            margin-left: 8px;
            padding-left: 3px;
            padding-right: 3px;
            font-size: 12px;
            color: rgb(255, 255, 255);
            display: block;
            margin-bottom: 8px;
            touch-action: manipulation;
            box-sizing: border-box;
            border: 0.666667px solid rgb(153, 153, 153);
            border-radius: 12px;
        }

        .style-26 {
            font-size: 14px;
            border-radius: 25px;
            border: 0px none rgb(73, 80, 87);
            display: block;
            width: 100%;
            padding: 8px 12px;
            line-height: 17.5px;
            color: rgb(73, 80, 87);
            background-color: rgb(255, 255, 255);
            background-image: none;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            overflow: auto;
            resize: vertical;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }

        .style-27 {
            text-align: center;
            margin-top: 15px;
            font-size: 14px;
            margin-bottom: 16px;
            box-sizing: border-box;
        }

        .style-28 {
            border-radius: 25px;
            text-transform: capitalize;
            font-size: 15px;
            padding: 10px 19px;
            cursor: pointer;
            background: rgba(0, 0, 0, 0) linear-gradient(45deg, rgb(255, 182, 77), rgb(255, 203, 128)) repeat scroll 0% 0% / auto padding-box border-box;
            display: inline-block;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            user-select: none;
            line-height: 18.75px;
            transition: all 0.15s ease-in-out 0s;
            appearance: button;
            overflow: visible;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }

        .style-29 {
            margin-right: 5px;
            font-family: themify;
            font-style: normal;
            font-weight: 400;
            font-variant: normal;
            text-transform: none;
            line-height: 15px;
            -webkit-font-smoothing: antialiased;
            box-sizing: border-box;
        }

        #customTableContainer {
            margin-top: 3rem;
        }

        .custom-table-container {
            background: #fff;
            box-shadow: 0px 0px 1px 0px gray;
            padding: 20px;
            border-radius: 15px;
            max-width: 100%;
            position: relative;
            width: 100%;
            min-height: 1px;
            padding-right: 20px;
            padding-left: 20px;
        }

        .custom-table-header {
            position: relative;
            clear: both;
        }

        .custom-table-header-left {
            color: rgb(51, 51, 51);
            float: left;
        }

        .custom-table-header-right {
            color: rgb(51, 51, 51);
            float: right;
            text-align: right;
        }

        .table-label {
            display: inline-block;
            margin-bottom: 8px;
        }

        #searchInput {
            border: 0.666667px solid rgb(170, 170, 170);
            border-radius: 3px;
            padding: 5px;
            background-color: rgba(0, 0, 0, 0);
            margin-left: 3px;
            outline-offset: -2px;
            appearance: none;
            overflow: visible;
            margin: 0px 0px 0px 3px;
            font-family: Poppins, sans-serif;
            font-size: 14px;
            line-height: 21px;
            color: rgb(65, 80, 148);
            padding-left: 5px;
        }

        #customTable {
            width: 100%;
            border-bottom: 0.666667px solid rgb(17, 17, 17);
            margin: 0px auto;
            clear: both;
            border-collapse: collapse;
            border-spacing: 0px 0px;
            max-width: 100%;
            margin-bottom: 0px;
            background-color: rgba(0, 0, 0, 0);
        }

            #customTable thead {
                border-bottom: 2px solid #f6f7fb;
                color: rgb(255, 255, 255);
                background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(94, 114, 228) 0px, rgb(130, 94, 228) 100%) repeat scroll 0% 0% / auto padding-box border-box;
            }

            #customTable th {
                padding: 10px 18px;
                border-bottom: 0.666667px solid rgb(17, 17, 17);
                font-weight: 700;
                white-space: nowrap;
                border-bottom-color: rgb(17, 17, 17);
                vertical-align: bottom;
                border-top: 0.666667px solid rgb(233, 236, 239);
                text-align: left;
            }

            #customTable td {
                padding: 20px 10px 15px;
                text-align: center;
                white-space: nowrap;
                vertical-align: top;
                border-top: 0.666667px solid rgb(233, 236, 239);
                padding-top: 20px;
                padding-bottom: 15px;
            }

        .classFormData {
            background: #fff;
            box-shadow: 0px 0px 1px 0px gray;
            flex: 0 0 50%;
            max-width: 50%;
            padding: 20px;
            border-radius: 15px;
            position: relative;
            width: 100%;
            min-height: 1px;
            padding-right: 20px;
            padding-left: 20px;
            box-sizing: border-box;
        }

        .formTitle {
            line-height: 16px;
            text-align: center;
            margin-top: 10px;
            margin: 10px 0px 0px;
            font-weight: 600;
            width: 100% !important;
            font-size: 20px;
            margin-bottom: 0px;
            font-family: Poppins, sans-serif;
            color: rgb(34, 34, 34);
            box-sizing: border-box;
        }

        .formLabel {
            background: rgba(0, 0, 0, 0) linear-gradient(87deg, rgb(94, 114, 228) 0px, rgb(130, 94, 228) 100%);
            padding-left: 3px;
            padding-right: 3px;
            font-size: 12px;
            color: rgb(255, 255, 255);
            display: block;
            margin-bottom: 8px;
            touch-action: manipulation;
            box-sizing: border-box;
            border: 0.666667px solid rgb(153, 153, 153);
            border-radius: 12px;
        }

        .requiredLabel {
            margin-top: -25px;
            position: absolute;
            margin-left: 8px;
        }

        .formInput {
            font-size: 14px;
            border-radius: 25px;
            border: 0px none rgb(73, 80, 87);
            display: block;
            width: 100%;
            padding: 8px 12px;
            line-height: 17.5px;
            color: rgb(73, 80, 87);
            background-color: rgb(255, 255, 255);
            background-image: none;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            overflow: visible;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }

        .inputContainer {
            border: 0.666667px solid rgb(150, 152, 214);
            border-radius: 25px;
            margin-top: 15px;
            padding: 5px;
            box-sizing: border-box;
        }

        .formSelect {
            font-size: 14px;
            border-radius: 25px;
            border: 0px none rgb(73, 80, 87);
            height: 38px;
            width: 100%;
            padding: 8px 12px;
            line-height: normal;
            color: rgb(73, 80, 87);
            background-color: rgb(255, 255, 255);
            background-image: none;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            text-transform: none;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }

        .selectDropdown {
            padding: 0px;
            height: auto;
            border: 0px none rgb(73, 80, 87);
            background: rgba(0, 0, 0, 0) none repeat scroll 0px 0px / auto padding-box border-box;
            box-shadow: none;
            border-radius: 25px;
            position: relative;
            font-size: 14px;
            display: block;
            width: 100%;
            line-height: 17.5px;
            color: rgb(73, 80, 87);
            background-color: rgba(0, 0, 0, 0);
            background-image: none;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
            box-sizing: border-box;
        }

        .buttonContainer {
            text-align: center;
            margin-bottom: 20px;
            margin-top: 30px;
            box-sizing: border-box;
        }

        .formButton {
            border-radius: 25px;
            text-transform: capitalize;
            font-size: 15px;
            padding: 10px 19px;
            cursor: pointer;
            background: rgba(0, 0, 0, 0) linear-gradient(45deg, rgb(255, 182, 77), rgb(255, 203, 128)) repeat scroll 0% 0% / auto padding-box border-box;
            display: inline-block;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            user-select: none;
            line-height: 18.75px;
            transition: all 0.15s ease-in-out 0s;
            appearance: button;
            overflow: visible;
            margin: 0px;
            font-family: Poppins, sans-serif;
            touch-action: manipulation;
            box-sizing: border-box;
        }
        @@media (min-width: 1200px) {
    .style-0 {
        flex: 0 0 25%; /* Adjust flex basis for larger screens */
        padding: 30px; /* Increase padding */
        font-size: 18px; /* Increase font size if needed */
    }
    
    .custom-table-container {
        padding: 30px; /* Increase padding */
    }
    
    .classFormData {
        max-width: 40%; /* Adjust form width */
    }
    
    .formTitle {
        font-size: 24px; /* Increase font size */
    }
    
    .formLabel {
        font-size: 14px; /* Increase font size */
    }
    
    .formInput, .formSelect {
        font-size: 16px; /* Increase font size */
    }
    
    .buttonContainer {
        margin-top: 40px; /* Increase top margin */
    }
    
    .formButton {
        font-size: 18px; /* Increase font size */
        padding: 12px 24px; /* Increase padding */
    }
}

@@media (min-width: 1600px) {
    .style-0 {
        flex: 0 0 20%; /* Adjust flex basis for very large screens */
        padding: 25px; /* Further increase padding */
        font-size: 20px; /* Further increase font size */
    }
    
    .custom-table-container {
        padding: 40px; /* Further increase padding */
    }
    
    .classFormData {
        max-width: 30%; /* Adjust form width */
    }
    
    .formTitle {
        font-size: 28px; /* Further increase font size */
    }
    
    .formLabel {
        font-size: 16px; /* Further increase font size */
    }
    
    .formInput, .formSelect {
        font-size: 18px; /* Further increase font size */
    }
    
    .buttonContainer {
        margin-top: 50px; /* Further increase top margin */
    }
    
    .formButton {
        font-size: 20px; /* Further increase font size */
        padding: 15px 30px; /* Further increase padding */
    }
}

    </style>

</head>

<body>
<div class="page-wrapper">
        <div class="tab-container container-fluid mt-3">
            <div class="col-md-12">
                <div class="style-0" style="max-width: 100%;margin:0px;">
                    <strong> Section</strong> | <i class="fas fa-home home-icon"> </i> - Add New Section
                </div>
            </div>


        </div>
        <div class="tab-container container-fluid d-md-flex">
            <div class="col-md-4 mt-4" id="classFormContainer">
                <div class="style-0" style="max-width:100%; margin:0px;" id="classFormData">
                <form id="addSectionForm" method="post">
                    <br />
                    <h5 class="formTitle pb-3">Create Section</h5>
                    <input type="hidden" name="Id" />
                    <div class="inputContainer">
                        <label class="formLabel requiredLabel">Class *</label>
                        <select name="ClassId" class="form-control form-select" style="margin-bottom:0px;" required>
                            <option value="">Select Class</option>
                            @foreach (var classItem in classes)
                            {
                                <option value="@classItem.Id">@classItem.ClassName</option>
                            }
                        </select>
                    </div>
                    <br />
                    <div class="inputContainer">
                        <label class="formLabel requiredLabel">Section Name *</label>
                        <input type="text" placeholder="Enter section name" name="Name"  required class="formInput" />
                    </div>
                    <br />
                    <div class="inputContainer">
                        <label class="formLabel requiredLabel">Description *</label>
                        <input type="text" placeholder="Enter Description" name="Description" class="formInput" />
                    </div>
                    <div class="buttonContainer">
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
            <div class="col-md-8 mt-4" id="classFormContainers">
                <div class="style-0" id="classFormData" style="max-width:100%; margin:0px;">
                    <div class="col-12 d-flex justify-content-center">
                <h5 class="formTitle pb-3 ">Section List</h5>
                </div>
                    <table id="SectionId" class="display mt-2" style="width:100%;">
                        <thead style="background-color:rgb(94, 114, 228); height: 38px;">
                            <tr style="color: white;">
                            <th>Class</th>
                            <th>Section</th>
                            <th>Description</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be populated by DataTables -->
                    </tbody>
                </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Edit Modal -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form id="editClassForm" method="post">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModal">Edit Section</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="editId" name="Id" />
                    <div class="inputContainer">
                        <label class="formLabel requiredLabel">Class Name*</label>
                        <select id="editLessonClass" name="ClassId" required class="formInput">
                            <!-- Options will be populated dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editName" class="col-form-label">Section Name:</label>
                        <input type="text" class="form-control" id="editName" name="Name">
                    </div>
                    <div class="form-group">
                        <label for="editDescription" class="col-form-label">Description:</label>
                        <textarea class="form-control" id="editDescription" name="Description"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        // Initialize DataTable
        var table = $('#SectionId').DataTable({
            "ajax": {
                "url": "/Admin/ClassesandSection/SectionList",
                "type": "GET",
                "dataType": "json",
                "dataSrc": "data"
            },
            "columns": [
                { "data": "className" },
                { "data": "name" },
                { "data": "description" },
                {
                    "data": null,
                    "render": function (data, type, row) {
                        return `
                            <div class="container">
                                <button class="btn btn-primary btn-sm edit-btn" data-id="${data.id}" data-class-id="${data.classId}" data-name="${data.name}" data-description="${data.description}" data-toggle="modal" data-target="#editModal">
                                    <i style="font-size:15px" class="fa">&#xf044;</i>
                                </button>
                                <button class="btn btn-danger btn-sm delete-btn" data-id="${data.id}">
                                    <i style="font-size:15px" class="fa">&#xf1f8;</i>
                                </button>
                            </div>
                        `;
                    }
                }
            ]
        });

        // Function to handle server response
        function handleResponse(response, successMessage, errorMessage) {
            if (response.isSuccess) {
                toastr.success(successMessage || response.message);
                table.ajax.reload(); // Reload the DataTable to reflect changes
                $('#addSectionForm')[0].reset();
                $('#editModal').modal('hide'); // Close the edit modal
            } else {
                toastr.error(errorMessage || response.message);
            }
        }

        // Handle add form submission

            $('#addSectionForm').submit(function (e) {
                e.preventDefault();
                var formData = $(this).serialize();

                $.ajax({
                    type: 'POST',
                    url: '/Admin/ClassesandSection/AddNewSection',
                    data: formData,
                    success: function (response) {
                        if (response.isSuccess) {
                            toastr.success(response.message || 'Section added successfully.');
                            $('#addSectionForm')[0].reset();
                            $('#SectionId').DataTable().ajax.reload(); // Reload the DataTable to reflect changes
                        } else {
                            toastr.error(response.message || 'Failed to add section.');
                            if (response.message === "Section name already exists.") {
                                
                            }
                        }
                    },
                    error: function () {
                        toastr.error('An error occurred while adding the section.');
                    }
                });
            });

        // Handle edit button click
        $('#SectionId').on('click', '.edit-btn', function () {
            var id = $(this).data('id');
            var classId = $(this).data('class-id');
            var name = $(this).data('name');
            var description = $(this).data('description');

            $('#editId').val(id);
            $('#editLessonClass').val(classId);
            $('#editName').val(name);
            $('#editDescription').val(description);

            // Populate class dropdown
            $.get('/Admin/ClassesandSection/GetClasses')
                .done(function (classesResponse) {
                    $('#editLessonClass').empty();
                    classesResponse.forEach(function (item) {
                        $('#editLessonClass').append(`<option value="${item.id}" ${item.id == classId ? 'selected' : ''}>${item.className}</option>`);
                    });
                });
        });

        // Handle edit form submission
        $('#editClassForm').submit(function (e) {
            e.preventDefault();
            var formData = $(this).serialize();

            $.ajax({
                type: 'POST',
                url: '/Admin/ClassesandSection/UpdateSection',
                data: formData,
                success: function (response) {
                    handleResponse(response, 'Section updated successfully.', 'Failed to update section.');
                    $('#editModal').modal('hide');
                    $('#editModal').modal('hide');
                    location.reload();
                },
                error: function () {
                    toastr.error('An error occurred while updating the section.');
                }
            });
        });

        // Handle delete button click
        $('#SectionId').on('click', '.delete-btn', function () {
            var id = $(this).data('id');

            if (confirm('Are you sure you want to delete this section?')) {
                $.ajax({
                    type: 'POST',
                    url: '/Admin/ClassesandSection/DeleteSection',
                    data: { id: id },
                    success: function (response) {
                        handleResponse(response, 'Section deleted successfully.', 'Failed to delete section.');
                    },
                    error: function () {
                        toastr.error('An error occurred while deleting the section.');
                    }
                });
            }
        });
    });

</script>
</body>